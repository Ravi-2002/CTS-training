it('should call postServices and set pendingService when toggleOn is called', async () => {
  const mockPostServices = jest.fn(() => Promise.resolve());
  const mockActions = { postServices: mockPostServices };
  const mockEvent = { preventDefault: jest.fn() };

  const mockProps = {
    actions: mockActions,
    selectedDevice: { encryptedMtn: '123456' },
  };

  const wrapper = shallow(
    <BlockServices.WrappedComponent {...mockProps} />
  );
  const instance = wrapper.instance();

  // Mock state before toggleOn
  instance.setState({
    services: {
      email: {
        data: [
          { sfoEnabled: 'Y', sfoCode: 'AB12' },
        ],
      },
    },
    successMsg: 'Old Message',
  });

  // Call toggleOn
  await instance.toggleOn(mockEvent, 'email', 0);

  // Assertions
  expect(mockEvent.preventDefault).toHaveBeenCalled();
  expect(mockPostServices).toHaveBeenCalledWith({
    mdn: '123456',
    sfoCode: 'AB12',
    sfoEnabled: 'N', // flipped from Y â†’ N
  });
  expect(instance.state.pendingService).toEqual({ service: 'email', i: 0 });
  expect(instance.state.successMsg).toBe('');
});