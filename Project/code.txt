test("renderPreferenceLink covers every single branch", () => {
  const Connected = require("./deviceDetail").default;

  const DeviceDetail =
    Connected.WrappedComponent ||
    Connected.default?.WrappedComponent ||
    Connected;

  // ---- 1. Build full props to trigger all lines ----
  const props = {
    deviceDetailInfoSection: {
      pageAttributes: {
        enableSharenameid: "true",
        enableCallFilter: "true",
      },
      sections: [
        {
          contents: [{ items: [{}] }],
          data: [
            {
              mtn: "12345",
              preferences: {
                shareNameIDBtn: true,
                blockSpecificServicesBtn: true,
                blockCallsAndMessagesBtn: true,
                manageCallFilterBtn: true,
                someOtherPref: true,
              },
              shareNameIDBtnThrottle: true,
            },
          ],
        },
      ],
    },
  };

  const inst = new DeviceDetail(props);
  inst.props = props;
  inst.state = { selectedMdn: "12345" };

  // ---- 2. Mock getOnClickInfo so each branch executes safely ----
  inst.getOnClickInfo = jest.fn(() => ({
    onclick: jest.fn(),
  }));

  // ---- 3. Iterate over every conditional path ----
  const keysToTest = [
    "shareNameIDBtn",
    "blockSpecificServicesBtn",
    "blockCallsAndMessagesBtn",
    "manageCallFilterBtn",
    "someOtherPref", // hits the final ELSE
  ];

  keysToTest.forEach((key) => {
    const node = inst.renderPreferenceLink(key, 0);

    // trigger the <ListGroupItem onClick> manually
    const onClick =
      node.props.children.props.children.props.onClick;

    onClick();
  });

  // ---- 4. Now cover the NULL return branch ----
  props.deviceDetailInfoSection.sections[0].data[0].preferences = {}; // no prefs
  const nullReturn = inst.renderPreferenceLink("nonExistingKey", 0);
  expect(nullReturn).toBeNull();

  // FINAL ASSERT
  expect(true).toBe(true);
});