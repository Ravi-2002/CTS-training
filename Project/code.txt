// safely mock sessionStorage without re-assigning the global object
const store = {};
jest.spyOn(window.sessionStorage.__proto__, 'getItem').mockImplementation((k) => store[k] ?? null);
jest.spyOn(window.sessionStorage.__proto__, 'setItem').mockImplementation((k, v) => {
  store[k] = String(v);
});
jest.spyOn(window.sessionStorage.__proto__, 'removeItem').mockImplementation((k) => {
  delete store[k];
});
jest.spyOn(window.sessionStorage.__proto__, 'clear').mockImplementation(() => {
  for (const key of Object.keys(store)) delete store[key];
});