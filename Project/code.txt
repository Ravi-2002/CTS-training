export const postaddBlockCallMsg = (blockNum) => async dispatch => {

  dispatch(postaddBlockCallMsgBegin())
  const onSuccess = (resp) => {
    if (
      resp &&
      resp.data &&
      resp.data.responseInfo &&
      resp.data.responseInfo.responseCode == "00"
    ) {
      
      dispatch(postaddBlockCallMsgSuccess(resp.data));
    } else {
      dispatch(postaddBlockCallMsgError(resp.data));
    }
  };
  
  const onError = error => {
    // below code is for redirecting to unauthorised screen for member account
    let msResp = error && error.response && error.response.data;
    let responseCode = msResp && msResp.responseInfo && msResp.responseInfo.responseCode;
    let responseMessage = msResp && msResp.responseInfo && msResp.responseInfo.responseMessage;
    if (responseCode == "401" && responseMessage.includes("mobileSecure")) {
      window.location.href = apiUrl().mvoLimitedAccessUrl;
    }
    else {
      dispatch(postaddBlockCallMsgError(error));
    }
  };
  
  const callMS = () => {
    let axConfig = {
      headers: {
        flowName:'Blocks',
        contentType: 'application/json',
        
      },
    }
    if (apiUrl().addNumber?.indexOf('apiData') > -1) {
      return getHttpClientRequest(
        apiUrl().addNumber,
        axConfig
      ) 
    } else {
      
      return postHttpClientRequest(
        apiUrl().addNumber,
        blockNum,
        axConfig
      );
    }
  }
  
  callMS()
    .then(msResp => {
      console.log(msResp, 'msResp')
      if (msResp && msResp.status == 200) {
        onSuccess(msResp);
      }
    })
    .catch(onError);

}
