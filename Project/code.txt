describe('Global setup for faroMonitoring and appPerformanceMetrics', () => {
  afterEach(() => {
    jest.resetModules();
  });

  test('sets monitoring globals when enableFaroMonitoring is "Y"', () => {
    global.reactGlobals = { enableFaroMonitoring: 'Y' };
    delete window.appPerformanceMetrics;

    require('../app'); // trigger top-level code

    expect(global.reactGlobals.enableFaroMonitoring).toBe('Y');
    expect(window.appPerformanceMetrics).toEqual({
      startMonitoring: false,
      perfArr: [],
    });
  });

  test('does not set enableFaroMonitoring if not "Y"', () => {
    global.reactGlobals = { enableFaroMonitoring: '' };
    delete window.appPerformanceMetrics;

    require('../app');

    expect(global.reactGlobals.enableFaroMonitoring).toBe('');
    expect(window.appPerformanceMetrics).toEqual({
      startMonitoring: false,
      perfArr: [],
    });
  });
});