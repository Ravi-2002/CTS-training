import React from "react";
import { render, screen, fireEvent } from "@testing-library/react";
import { BlockCallsMessages } from "../BlockCallsMessages"; // unconnected component

describe("BlockCallsMessages handleOnChange and handleInput", () => {
  let wrapper;

  beforeEach(() => {
    wrapper = render(<BlockCallsMessages />);
  });

  it("should update newNumber and addnumberValid for valid number", () => {
    const input = screen.getByPlaceholderText(/Enter a number/i); // adjust placeholder

    fireEvent.change(input, { target: { value: "1234567890" } });

    // The component state can be accessed via ref or instance; here we'll check the input value
    expect(input.value).toBe("123.456.7890");
  });

  it("should mark addnumberValid false for invalid input", () => {
    const input = screen.getByPlaceholderText(/Enter a number/i);

    fireEvent.change(input, { target: { value: "123abc" } });

    // Only digits remain
    expect(input.value).toBe("123");
  });

  it("should toggle applyAllFlag for checkbox inputType", () => {
    // Mock component instance
    const { container } = wrapper;
    const instance = container.firstChild._reactInternals.child.stateNode;

    const mockEvent = { target: { checked: true } };
    instance.handleOnChange(mockEvent, "checkbox");

    expect(instance.state.applyAllFlag).toBe(true);
  });
});